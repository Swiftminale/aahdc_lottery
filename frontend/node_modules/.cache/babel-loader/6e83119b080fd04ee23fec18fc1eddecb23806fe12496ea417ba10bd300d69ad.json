{"ast":null,"code":"var _jsxFileName = \"/home/minale/trial/aahdc-lottery-platform-v1/frontend/src/pages/AAHDCAdminPage.js\",\n  _s = $RefreshSig$();\n// frontend/src/pages/AAHDCAdminPage.js\nimport React, { useState, useEffect } from \"react\";\nimport { getUnits } from \"../services/unitService\";\nimport { runAllocation, getAllocatedUnits } from \"../services/allocationService\";\nimport { downloadExcelReport, downloadPdfReport } from \"../services/reportService\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction AAHDCAdminPage() {\n  _s();\n  // const [units, setUnits] = useState([]);\n  // Allocated units now displayed from allocated snapshot endpoint\n  const [unallocatedUnits, setUnallocatedUnits] = useState([]);\n  const [allocatedSnapshot, setAllocatedSnapshot] = useState([]); // from /api/allocation/allocated\n  const [selectedMethod, setSelectedMethod] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  // Pagination state\n  const [unallocatedPage, setUnallocatedPage] = useState(1);\n  const [allocatedPage, setAllocatedPage] = useState(1);\n  const PAGE_SIZE = 10;\n\n  // const fetchUnits = async () => {\n  //   setLoading(true);\n  //   try {\n  //     const allUnits = await getUnits();\n  //     setUnits(allUnits);\n  //     setAllocatedUnits(allUnits.filter((u) => u.allocated));\n  //     setUnallocatedUnits(allUnits.filter((u) => !u.allocated));\n  //   } catch (err) {\n  //     setError(err.message || \"Failed to fetch units.\");\n  //   } finally {\n  //     setLoading(false);\n  //   }\n  // };\n\n  const fetchUnits = async () => {\n    setLoading(true);\n    try {\n      const allUnits = await getUnits();\n      // Defensive: filter out units missing required fields\n      const validUnits = Array.isArray(allUnits) ? allUnits.filter(u => u && typeof u.unitId !== \"undefined\" && typeof u.allocated !== \"undefined\") : [];\n      // allocated units list comes from allocated snapshot endpoint\n      setUnallocatedUnits(validUnits.filter(u => u.allocated === false));\n      setUnallocatedPage(1); // Reset to first page on data reload\n      setAllocatedPage(1);\n    } catch (err) {\n      setError(err.message || \"Failed to fetch units.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchUnits();\n    fetchAllocated();\n  }, []);\n\n  // const handleRunAllocation = async () => {\n  //   setMessage(\"\");\n  //   setError(\"\");\n  //   setLoading(true);\n  //   try {\n  //     const response = await runAllocation(selectedMethod);\n  //     setMessage(response.message);\n  //     if (response.complianceIssues && response.complianceIssues.length > 0) {\n  //       setError(\n  //         \"Compliance issues detected after allocation: \" +\n  //           response.complianceIssues.join(\", \")\n  //       );\n  //     }\n  //     fetchUnits(); // Refresh unit data\n  //   } catch (err) {\n  //     setError(err.message || \"Failed to run allocation.\");\n  //   } finally {\n  //     setLoading(false);\n  //   }\n  // };\n  const handleRunAllocation = async () => {\n    setMessage(\"\");\n    setError(\"\");\n    setLoading(true);\n    try {\n      const response = await runAllocation(selectedMethod);\n      setMessage(response.message);\n      if (response.complianceIssues && response.complianceIssues.length > 0) {\n        setError(\"Compliance issues detected after allocation: \" + response.complianceIssues.join(\", \"));\n      }\n    } catch (err) {\n      try {\n        // Try parsing the error message as JSON for detailed issues\n        const errorData = JSON.parse(err.message);\n        if (errorData.issues) {\n          setError(\"Pre-allocation compliance failed: \" + errorData.issues.join(\", \"));\n        } else {\n          setError(err.message || \"Failed to run allocation.\");\n        }\n      } catch {\n        setError(err.message || \"Failed to run allocation.\");\n      }\n    } finally {\n      setLoading(false);\n      fetchUnits();\n      // Refresh allocated snapshot (includes candidate info if present)\n      fetchAllocated();\n    }\n  };\n  const fetchAllocated = async () => {\n    try {\n      const data = await getAllocatedUnits();\n      setAllocatedSnapshot(Array.isArray(data) ? data : []);\n    } catch (e) {\n      // non-fatal for page\n    }\n  };\n  const handleDownloadExcel = async () => {\n    setError(\"\");\n    setMessage(\"\");\n    setLoading(true);\n    try {\n      await downloadExcelReport();\n      setMessage(\"Excel report downloaded successfully.\");\n    } catch (err) {\n      setError(err.message || \"Failed to download Excel report.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleDownloadPdf = async () => {\n    setError(\"\");\n    setMessage(\"\");\n    setLoading(true);\n    try {\n      await downloadPdfReport();\n      setMessage(\"PDF report downloaded successfully.\");\n    } catch (err) {\n      setError(err.message || \"Failed to download PDF report.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-card\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"AAHDC Admin Portal\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 19\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"message-success\",\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"message-error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        marginBottom: \"30px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Unallocated Units (\", unallocatedUnits.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, this), unallocatedUnits.length > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"table\", {\n          style: {\n            width: \"100%\",\n            borderCollapse: \"collapse\",\n            marginTop: \"10px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Unit ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Typology\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Gross Area\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Floor\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Block\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: unallocatedUnits.slice((unallocatedPage - 1) * PAGE_SIZE, unallocatedPage * PAGE_SIZE).map(unit => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: unit.unitId\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: unit.typology || \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: unit.grossArea ? Number(unit.grossArea).toFixed(2) : \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: unit.floorNumber || \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: unit.blockName || \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 23\n              }, this)]\n            }, unit.unitId, true, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            justifyContent: \"center\",\n            marginTop: 10,\n            gap: 10\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setUnallocatedPage(p => Math.max(1, p - 1)),\n            disabled: unallocatedPage === 1,\n            children: \"Previous\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Page \", unallocatedPage, \" of\", \" \", Math.ceil(unallocatedUnits.length / PAGE_SIZE)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setUnallocatedPage(p => p < Math.ceil(unallocatedUnits.length / PAGE_SIZE) ? p + 1 : p),\n            disabled: unallocatedPage >= Math.ceil(unallocatedUnits.length / PAGE_SIZE),\n            children: \"Next\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No unallocated units to display. Please submit units via the Developer Portal.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        marginBottom: \"30px\",\n        borderTop: \"1px solid #eee\",\n        paddingTop: \"20px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Run Allocation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          display: \"block\",\n          marginBottom: \"15px\",\n          textAlign: \"left\"\n        },\n        children: [\"Select Distribution Method:\", /*#__PURE__*/_jsxDEV(\"select\", {\n          value: selectedMethod,\n          onChange: e => setSelectedMethod(e.target.value),\n          style: {\n            width: \"100%\",\n            padding: \"10px\",\n            borderRadius: \"8px\",\n            border: \"1px solid #ddd\",\n            marginTop: \"5px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"-- Select Method --\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Full Lottery\",\n            children: \"Full Lottery (Houses + Shops)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Hybrid Lottery\",\n            children: \"Hybrid Lottery (Houses) + Negotiation (Shops)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Block-by-Block Assignment\",\n            children: \"Block-by-Block Assignment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Lottery Based on Floor Number\",\n            children: \"Lottery Based on Floor Number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Assign Candidates by Typology\",\n            children: \"Assign Candidates by Typology (match candidates to units)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleRunAllocation,\n        disabled: !selectedMethod || loading || unallocatedUnits.length === 0,\n        children: \"Run Allocation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        marginBottom: \"30px\",\n        borderTop: \"1px solid #eee\",\n        paddingTop: \"20px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Allocated Units (\", allocatedSnapshot.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 9\n      }, this), allocatedSnapshot.length > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"table\", {\n          style: {\n            width: \"100%\",\n            borderCollapse: \"collapse\",\n            marginTop: \"10px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Unit ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Typology\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Gross Area\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Floor\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Block\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 324,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Owner / Candidate\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Phone\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: allocatedSnapshot.slice((allocatedPage - 1) * PAGE_SIZE, allocatedPage * PAGE_SIZE).map(row => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: row.unitId\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: row.typology || \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: row.grossArea ? Number(row.grossArea).toFixed(2) : \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: row.floorNumber || \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: row.blockName || \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                style: {\n                  fontWeight: \"bold\",\n                  color: row.owner === \"AAHDC\" ? \"#27ae60\" : \"#2980b9\"\n                },\n                children: row.owner || row.candidateName || \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 344,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                style: {\n                  color: \"#333\"\n                },\n                children: row.candidatePhone || \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 23\n              }, this)]\n            }, row.unitId, true, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            justifyContent: \"center\",\n            marginTop: 10,\n            gap: 10\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setAllocatedPage(p => Math.max(1, p - 1)),\n            disabled: allocatedPage === 1,\n            children: \"Previous\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Page \", allocatedPage, \" of\", \" \", Math.ceil(allocatedSnapshot.length / PAGE_SIZE)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setAllocatedPage(p => p < Math.ceil(allocatedSnapshot.length / PAGE_SIZE) ? p + 1 : p),\n            disabled: allocatedPage >= Math.ceil(allocatedSnapshot.length / PAGE_SIZE),\n            children: \"Next\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No units have been allocated yet. Run an allocation method above.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        borderTop: \"1px solid #eee\",\n        paddingTop: \"20px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Reports\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          justifyContent: \"center\",\n          gap: \"15px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleDownloadExcel,\n          disabled: loading || allocatedSnapshot.length === 0,\n          style: {\n            backgroundColor: \"#28a745\"\n          },\n          children: \"Download Excel Report\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleDownloadPdf,\n          disabled: loading || allocatedSnapshot.length === 0,\n          style: {\n            backgroundColor: \"#6c757d\"\n          },\n          children: \"Download PDF Report\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 163,\n    columnNumber: 5\n  }, this);\n}\n_s(AAHDCAdminPage, \"CKf4e5SzOWQkiTiogOSljimbyb8=\");\n_c = AAHDCAdminPage;\nexport default AAHDCAdminPage;\nvar _c;\n$RefreshReg$(_c, \"AAHDCAdminPage\");","map":{"version":3,"names":["React","useState","useEffect","getUnits","runAllocation","getAllocatedUnits","downloadExcelReport","downloadPdfReport","jsxDEV","_jsxDEV","Fragment","_Fragment","AAHDCAdminPage","_s","unallocatedUnits","setUnallocatedUnits","allocatedSnapshot","setAllocatedSnapshot","selectedMethod","setSelectedMethod","message","setMessage","error","setError","loading","setLoading","unallocatedPage","setUnallocatedPage","allocatedPage","setAllocatedPage","PAGE_SIZE","fetchUnits","allUnits","validUnits","Array","isArray","filter","u","unitId","allocated","err","fetchAllocated","handleRunAllocation","response","complianceIssues","length","join","errorData","JSON","parse","issues","data","e","handleDownloadExcel","handleDownloadPdf","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","marginBottom","width","borderCollapse","marginTop","slice","map","unit","typology","grossArea","Number","toFixed","floorNumber","blockName","display","justifyContent","gap","onClick","p","Math","max","disabled","ceil","borderTop","paddingTop","textAlign","value","onChange","target","padding","borderRadius","border","row","fontWeight","color","owner","candidateName","candidatePhone","backgroundColor","_c","$RefreshReg$"],"sources":["/home/minale/trial/aahdc-lottery-platform-v1/frontend/src/pages/AAHDCAdminPage.js"],"sourcesContent":["// frontend/src/pages/AAHDCAdminPage.js\nimport React, { useState, useEffect } from \"react\";\nimport { getUnits } from \"../services/unitService\";\nimport {\n  runAllocation,\n  getAllocatedUnits,\n} from \"../services/allocationService\";\nimport {\n  downloadExcelReport,\n  downloadPdfReport,\n} from \"../services/reportService\";\n\nfunction AAHDCAdminPage() {\n  // const [units, setUnits] = useState([]);\n  // Allocated units now displayed from allocated snapshot endpoint\n  const [unallocatedUnits, setUnallocatedUnits] = useState([]);\n  const [allocatedSnapshot, setAllocatedSnapshot] = useState([]); // from /api/allocation/allocated\n  const [selectedMethod, setSelectedMethod] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  // Pagination state\n  const [unallocatedPage, setUnallocatedPage] = useState(1);\n  const [allocatedPage, setAllocatedPage] = useState(1);\n  const PAGE_SIZE = 10;\n\n  // const fetchUnits = async () => {\n  //   setLoading(true);\n  //   try {\n  //     const allUnits = await getUnits();\n  //     setUnits(allUnits);\n  //     setAllocatedUnits(allUnits.filter((u) => u.allocated));\n  //     setUnallocatedUnits(allUnits.filter((u) => !u.allocated));\n  //   } catch (err) {\n  //     setError(err.message || \"Failed to fetch units.\");\n  //   } finally {\n  //     setLoading(false);\n  //   }\n  // };\n\n  const fetchUnits = async () => {\n    setLoading(true);\n    try {\n      const allUnits = await getUnits();\n      // Defensive: filter out units missing required fields\n      const validUnits = Array.isArray(allUnits)\n        ? allUnits.filter(\n            (u) =>\n              u &&\n              typeof u.unitId !== \"undefined\" &&\n              typeof u.allocated !== \"undefined\"\n          )\n        : [];\n      // allocated units list comes from allocated snapshot endpoint\n      setUnallocatedUnits(validUnits.filter((u) => u.allocated === false));\n      setUnallocatedPage(1); // Reset to first page on data reload\n      setAllocatedPage(1);\n    } catch (err) {\n      setError(err.message || \"Failed to fetch units.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchUnits();\n    fetchAllocated();\n  }, []);\n\n  // const handleRunAllocation = async () => {\n  //   setMessage(\"\");\n  //   setError(\"\");\n  //   setLoading(true);\n  //   try {\n  //     const response = await runAllocation(selectedMethod);\n  //     setMessage(response.message);\n  //     if (response.complianceIssues && response.complianceIssues.length > 0) {\n  //       setError(\n  //         \"Compliance issues detected after allocation: \" +\n  //           response.complianceIssues.join(\", \")\n  //       );\n  //     }\n  //     fetchUnits(); // Refresh unit data\n  //   } catch (err) {\n  //     setError(err.message || \"Failed to run allocation.\");\n  //   } finally {\n  //     setLoading(false);\n  //   }\n  // };\n  const handleRunAllocation = async () => {\n    setMessage(\"\");\n    setError(\"\");\n    setLoading(true);\n    try {\n      const response = await runAllocation(selectedMethod);\n      setMessage(response.message);\n      if (response.complianceIssues && response.complianceIssues.length > 0) {\n        setError(\n          \"Compliance issues detected after allocation: \" +\n            response.complianceIssues.join(\", \")\n        );\n      }\n    } catch (err) {\n      try {\n        // Try parsing the error message as JSON for detailed issues\n        const errorData = JSON.parse(err.message);\n        if (errorData.issues) {\n          setError(\n            \"Pre-allocation compliance failed: \" + errorData.issues.join(\", \")\n          );\n        } else {\n          setError(err.message || \"Failed to run allocation.\");\n        }\n      } catch {\n        setError(err.message || \"Failed to run allocation.\");\n      }\n    } finally {\n      setLoading(false);\n      fetchUnits();\n      // Refresh allocated snapshot (includes candidate info if present)\n      fetchAllocated();\n    }\n  };\n\n  const fetchAllocated = async () => {\n    try {\n      const data = await getAllocatedUnits();\n      setAllocatedSnapshot(Array.isArray(data) ? data : []);\n    } catch (e) {\n      // non-fatal for page\n    }\n  };\n\n  const handleDownloadExcel = async () => {\n    setError(\"\");\n    setMessage(\"\");\n    setLoading(true);\n    try {\n      await downloadExcelReport();\n      setMessage(\"Excel report downloaded successfully.\");\n    } catch (err) {\n      setError(err.message || \"Failed to download Excel report.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDownloadPdf = async () => {\n    setError(\"\");\n    setMessage(\"\");\n    setLoading(true);\n    try {\n      await downloadPdfReport();\n      setMessage(\"PDF report downloaded successfully.\");\n    } catch (err) {\n      setError(err.message || \"Failed to download PDF report.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"container-card\">\n      <h2>AAHDC Admin Portal</h2>\n      {loading && <p>Loading...</p>}\n      {message && <p className=\"message-success\">{message}</p>}\n      {error && <p className=\"message-error\">{error}</p>}\n\n      <section style={{ marginBottom: \"30px\" }}>\n        <h3>Unallocated Units ({unallocatedUnits.length})</h3>\n        {unallocatedUnits.length > 0 ? (\n          <>\n            <table\n              style={{\n                width: \"100%\",\n                borderCollapse: \"collapse\",\n                marginTop: \"10px\",\n              }}\n            >\n              <thead>\n                <tr>\n                  <th>Unit ID</th>\n                  <th>Typology</th>\n                  <th>Gross Area</th>\n                  <th>Floor</th>\n                  <th>Block</th>\n                </tr>\n              </thead>\n              <tbody>\n                {unallocatedUnits\n                  .slice(\n                    (unallocatedPage - 1) * PAGE_SIZE,\n                    unallocatedPage * PAGE_SIZE\n                  )\n                  .map((unit) => (\n                    <tr key={unit.unitId}>\n                      <td>{unit.unitId}</td>\n                      <td>{unit.typology || \"-\"}</td>\n                      <td>\n                        {unit.grossArea\n                          ? Number(unit.grossArea).toFixed(2)\n                          : \"-\"}\n                      </td>\n                      <td>{unit.floorNumber || \"-\"}</td>\n                      <td>{unit.blockName || \"-\"}</td>\n                    </tr>\n                  ))}\n              </tbody>\n            </table>\n            {/* Pagination controls */}\n            <div\n              style={{\n                display: \"flex\",\n                justifyContent: \"center\",\n                marginTop: 10,\n                gap: 10,\n              }}\n            >\n              <button\n                onClick={() => setUnallocatedPage((p) => Math.max(1, p - 1))}\n                disabled={unallocatedPage === 1}\n              >\n                Previous\n              </button>\n              <span>\n                Page {unallocatedPage} of{\" \"}\n                {Math.ceil(unallocatedUnits.length / PAGE_SIZE)}\n              </span>\n              <button\n                onClick={() =>\n                  setUnallocatedPage((p) =>\n                    p < Math.ceil(unallocatedUnits.length / PAGE_SIZE)\n                      ? p + 1\n                      : p\n                  )\n                }\n                disabled={\n                  unallocatedPage >=\n                  Math.ceil(unallocatedUnits.length / PAGE_SIZE)\n                }\n              >\n                Next\n              </button>\n            </div>\n          </>\n        ) : (\n          <p>\n            No unallocated units to display. Please submit units via the\n            Developer Portal.\n          </p>\n        )}\n      </section>\n\n      <section\n        style={{\n          marginBottom: \"30px\",\n          borderTop: \"1px solid #eee\",\n          paddingTop: \"20px\",\n        }}\n      >\n        <h3>Run Allocation</h3>\n        <label\n          style={{ display: \"block\", marginBottom: \"15px\", textAlign: \"left\" }}\n        >\n          Select Distribution Method:\n          <select\n            value={selectedMethod}\n            onChange={(e) => setSelectedMethod(e.target.value)}\n            style={{\n              width: \"100%\",\n              padding: \"10px\",\n              borderRadius: \"8px\",\n              border: \"1px solid #ddd\",\n              marginTop: \"5px\",\n            }}\n          >\n            <option value=\"\">-- Select Method --</option>\n            <option value=\"Full Lottery\">Full Lottery (Houses + Shops)</option>\n            <option value=\"Hybrid Lottery\">\n              Hybrid Lottery (Houses) + Negotiation (Shops)\n            </option>\n            <option value=\"Block-by-Block Assignment\">\n              Block-by-Block Assignment\n            </option>\n            <option value=\"Lottery Based on Floor Number\">\n              Lottery Based on Floor Number\n            </option>\n            <option value=\"Assign Candidates by Typology\">\n              Assign Candidates by Typology (match candidates to units)\n            </option>\n          </select>\n        </label>\n        <button\n          onClick={handleRunAllocation}\n          disabled={!selectedMethod || loading || unallocatedUnits.length === 0}\n        >\n          Run Allocation\n        </button>\n      </section>\n\n      <section\n        style={{\n          marginBottom: \"30px\",\n          borderTop: \"1px solid #eee\",\n          paddingTop: \"20px\",\n        }}\n      >\n        <h3>Allocated Units ({allocatedSnapshot.length})</h3>\n        {allocatedSnapshot.length > 0 ? (\n          <>\n            <table\n              style={{\n                width: \"100%\",\n                borderCollapse: \"collapse\",\n                marginTop: \"10px\",\n              }}\n            >\n              <thead>\n                <tr>\n                  <th>Unit ID</th>\n                  <th>Typology</th>\n                  <th>Gross Area</th>\n                  <th>Floor</th>\n                  <th>Block</th>\n                  <th>Owner / Candidate</th>\n                  <th>Phone</th>\n                </tr>\n              </thead>\n              <tbody>\n                {allocatedSnapshot\n                  .slice(\n                    (allocatedPage - 1) * PAGE_SIZE,\n                    allocatedPage * PAGE_SIZE\n                  )\n                  .map((row) => (\n                    <tr key={row.unitId}>\n                      <td>{row.unitId}</td>\n                      <td>{row.typology || \"-\"}</td>\n                      <td>\n                        {row.grossArea ? Number(row.grossArea).toFixed(2) : \"-\"}\n                      </td>\n                      <td>{row.floorNumber || \"-\"}</td>\n                      <td>{row.blockName || \"-\"}</td>\n                      <td\n                        style={{\n                          fontWeight: \"bold\",\n                          color: row.owner === \"AAHDC\" ? \"#27ae60\" : \"#2980b9\",\n                        }}\n                      >\n                        {row.owner || row.candidateName || \"-\"}\n                      </td>\n                      <td style={{ color: \"#333\" }}>\n                        {row.candidatePhone || \"-\"}\n                      </td>\n                    </tr>\n                  ))}\n              </tbody>\n            </table>\n            {/* Pagination controls */}\n            <div\n              style={{\n                display: \"flex\",\n                justifyContent: \"center\",\n                marginTop: 10,\n                gap: 10,\n              }}\n            >\n              <button\n                onClick={() => setAllocatedPage((p) => Math.max(1, p - 1))}\n                disabled={allocatedPage === 1}\n              >\n                Previous\n              </button>\n              <span>\n                Page {allocatedPage} of{\" \"}\n                {Math.ceil(allocatedSnapshot.length / PAGE_SIZE)}\n              </span>\n              <button\n                onClick={() =>\n                  setAllocatedPage((p) =>\n                    p < Math.ceil(allocatedSnapshot.length / PAGE_SIZE)\n                      ? p + 1\n                      : p\n                  )\n                }\n                disabled={\n                  allocatedPage >=\n                  Math.ceil(allocatedSnapshot.length / PAGE_SIZE)\n                }\n              >\n                Next\n              </button>\n            </div>\n          </>\n        ) : (\n          <p>\n            No units have been allocated yet. Run an allocation method above.\n          </p>\n        )}\n      </section>\n\n      <section style={{ borderTop: \"1px solid #eee\", paddingTop: \"20px\" }}>\n        <h3>Reports</h3>\n        <div style={{ display: \"flex\", justifyContent: \"center\", gap: \"15px\" }}>\n          <button\n            onClick={handleDownloadExcel}\n            disabled={loading || allocatedSnapshot.length === 0}\n            style={{ backgroundColor: \"#28a745\" }}\n          >\n            Download Excel Report\n          </button>\n          <button\n            onClick={handleDownloadPdf}\n            disabled={loading || allocatedSnapshot.length === 0}\n            style={{ backgroundColor: \"#6c757d\" }}\n          >\n            Download PDF Report\n          </button>\n        </div>\n      </section>\n    </div>\n  );\n}\n\nexport default AAHDCAdminPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}