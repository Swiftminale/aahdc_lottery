{"ast":null,"code":"var _jsxFileName = \"/home/minale/trial/aahdc-lottery-platform-v1/frontend/src/pages/AAHDCAdminPage.js\",\n  _s = $RefreshSig$();\n// frontend/src/pages/AAHDCAdminPage.js\nimport React, { useState, useEffect } from \"react\";\nimport { getUnits } from \"../services/unitService\";\nimport { runAllocation } from \"../services/allocationService\";\nimport { downloadExcelReport, downloadPdfReport } from \"../services/reportService\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction AAHDCAdminPage() {\n  _s();\n  // const [units, setUnits] = useState([]);\n  const [allocatedUnits, setAllocatedUnits] = useState([]);\n  const [unallocatedUnits, setUnallocatedUnits] = useState([]);\n  const [selectedMethod, setSelectedMethod] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  // Pagination state\n  const [unallocatedPage, setUnallocatedPage] = useState(1);\n  const [allocatedPage, setAllocatedPage] = useState(1);\n  const PAGE_SIZE = 10;\n\n  // const fetchUnits = async () => {\n  //   setLoading(true);\n  //   try {\n  //     const allUnits = await getUnits();\n  //     setUnits(allUnits);\n  //     setAllocatedUnits(allUnits.filter((u) => u.allocated));\n  //     setUnallocatedUnits(allUnits.filter((u) => !u.allocated));\n  //   } catch (err) {\n  //     setError(err.message || \"Failed to fetch units.\");\n  //   } finally {\n  //     setLoading(false);\n  //   }\n  // };\n\n  const fetchUnits = async () => {\n    setLoading(true);\n    try {\n      const allUnits = await getUnits();\n      // Defensive: filter out units missing required fields\n      const validUnits = Array.isArray(allUnits) ? allUnits.filter(u => u && typeof u.unitId !== \"undefined\" && typeof u.allocated !== \"undefined\") : [];\n      setAllocatedUnits(validUnits.filter(u => u.allocated === true));\n      setUnallocatedUnits(validUnits.filter(u => u.allocated === false));\n      setUnallocatedPage(1); // Reset to first page on data reload\n      setAllocatedPage(1);\n    } catch (err) {\n      setError(err.message || \"Failed to fetch units.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchUnits();\n  }, []);\n\n  // const handleRunAllocation = async () => {\n  //   setMessage(\"\");\n  //   setError(\"\");\n  //   setLoading(true);\n  //   try {\n  //     const response = await runAllocation(selectedMethod);\n  //     setMessage(response.message);\n  //     if (response.complianceIssues && response.complianceIssues.length > 0) {\n  //       setError(\n  //         \"Compliance issues detected after allocation: \" +\n  //           response.complianceIssues.join(\", \")\n  //       );\n  //     }\n  //     fetchUnits(); // Refresh unit data\n  //   } catch (err) {\n  //     setError(err.message || \"Failed to run allocation.\");\n  //   } finally {\n  //     setLoading(false);\n  //   }\n  // };\n  const handleRunAllocation = async () => {\n    setMessage(\"\");\n    setError(\"\");\n    setLoading(true);\n    try {\n      const response = await runAllocation(selectedMethod);\n      setMessage(response.message);\n      if (response.complianceIssues && response.complianceIssues.length > 0) {\n        setError(\"Compliance issues detected after allocation: \" + response.complianceIssues.join(\", \"));\n      }\n    } catch (err) {\n      try {\n        // Try parsing the error message as JSON for detailed issues\n        const errorData = JSON.parse(err.message);\n        if (errorData.issues) {\n          setError(\"Pre-allocation compliance failed: \" + errorData.issues.join(\", \"));\n        } else {\n          setError(err.message || \"Failed to run allocation.\");\n        }\n      } catch {\n        setError(err.message || \"Failed to run allocation.\");\n      }\n    } finally {\n      setLoading(false);\n      fetchUnits();\n    }\n  };\n  const handleDownloadExcel = async () => {\n    setError(\"\");\n    setMessage(\"\");\n    setLoading(true);\n    try {\n      await downloadExcelReport();\n      setMessage(\"Excel report downloaded successfully.\");\n    } catch (err) {\n      setError(err.message || \"Failed to download Excel report.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleDownloadPdf = async () => {\n    setError(\"\");\n    setMessage(\"\");\n    setLoading(true);\n    try {\n      await downloadPdfReport();\n      setMessage(\"PDF report downloaded successfully.\");\n    } catch (err) {\n      setError(err.message || \"Failed to download PDF report.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-card\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"AAHDC Admin Portal\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 19\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"message-success\",\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"message-error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        marginBottom: \"30px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Unallocated Units (\", unallocatedUnits.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this), unallocatedUnits.length > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"table\", {\n          style: {\n            width: \"100%\",\n            borderCollapse: \"collapse\",\n            marginTop: \"10px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Unit ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Typology\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Gross Area\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Floor\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Block\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: unallocatedUnits.slice((unallocatedPage - 1) * PAGE_SIZE, unallocatedPage * PAGE_SIZE).map(unit => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: unit.unitId\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: unit.typology || \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: unit.grossArea ? Number(unit.grossArea).toFixed(2) : \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: unit.floorNumber || \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: unit.blockName || \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 23\n              }, this)]\n            }, unit.unitId, true, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            justifyContent: \"center\",\n            marginTop: 10,\n            gap: 10\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setUnallocatedPage(p => Math.max(1, p - 1)),\n            disabled: unallocatedPage === 1,\n            children: \"Previous\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Page \", unallocatedPage, \" of \", Math.ceil(unallocatedUnits.length / PAGE_SIZE)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setUnallocatedPage(p => p < Math.ceil(unallocatedUnits.length / PAGE_SIZE) ? p + 1 : p),\n            disabled: unallocatedPage >= Math.ceil(unallocatedUnits.length / PAGE_SIZE),\n            children: \"Next\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No unallocated units to display. Please submit units via the Developer Portal.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        marginBottom: \"30px\",\n        borderTop: \"1px solid #eee\",\n        paddingTop: \"20px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Run Allocation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          display: \"block\",\n          marginBottom: \"15px\",\n          textAlign: \"left\"\n        },\n        children: [\"Select Distribution Method:\", /*#__PURE__*/_jsxDEV(\"select\", {\n          value: selectedMethod,\n          onChange: e => setSelectedMethod(e.target.value),\n          style: {\n            width: \"100%\",\n            padding: \"10px\",\n            borderRadius: \"8px\",\n            border: \"1px solid #ddd\",\n            marginTop: \"5px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"-- Select Method --\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Full Lottery\",\n            children: \"Full Lottery (Houses + Shops)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Hybrid Lottery\",\n            children: \"Hybrid Lottery (Houses) + Negotiation (Shops)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Block-by-Block Assignment\",\n            children: \"Block-by-Block Assignment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Lottery Based on Floor Number\",\n            children: \"Lottery Based on Floor Number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleRunAllocation,\n        disabled: !selectedMethod || loading || unallocatedUnits.length === 0,\n        children: \"Run Allocation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        marginBottom: \"30px\",\n        borderTop: \"1px solid #eee\",\n        paddingTop: \"20px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Allocated Units (\", allocatedUnits.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 9\n      }, this), allocatedUnits.length > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"table\", {\n          style: {\n            width: \"100%\",\n            borderCollapse: \"collapse\",\n            marginTop: \"10px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Unit ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Typology\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Gross Area\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Floor\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Block\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Owner\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: allocatedUnits.slice((allocatedPage - 1) * PAGE_SIZE, allocatedPage * PAGE_SIZE).map(unit => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: unit.unitId\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: unit.typology || \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: unit.grossArea ? Number(unit.grossArea).toFixed(2) : \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: unit.floorNumber || \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: unit.blockName || \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                style: {\n                  fontWeight: \"bold\",\n                  color: unit.owner === \"AAHDC\" ? \"#27ae60\" : \"#2980b9\"\n                },\n                children: unit.owner || \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 23\n              }, this)]\n            }, unit.unitId, true, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            justifyContent: \"center\",\n            marginTop: 10,\n            gap: 10\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setAllocatedPage(p => Math.max(1, p - 1)),\n            disabled: allocatedPage === 1,\n            children: \"Previous\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Page \", allocatedPage, \" of \", Math.ceil(allocatedUnits.length / PAGE_SIZE)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setAllocatedPage(p => p < Math.ceil(allocatedUnits.length / PAGE_SIZE) ? p + 1 : p),\n            disabled: allocatedPage >= Math.ceil(allocatedUnits.length / PAGE_SIZE),\n            children: \"Next\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No units have been allocated yet. Run an allocation method above.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        borderTop: \"1px solid #eee\",\n        paddingTop: \"20px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Reports\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          justifyContent: \"center\",\n          gap: \"15px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleDownloadExcel,\n          disabled: loading || allocatedUnits.length === 0,\n          style: {\n            backgroundColor: \"#28a745\"\n          },\n          children: \"Download Excel Report\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleDownloadPdf,\n          disabled: loading || allocatedUnits.length === 0,\n          style: {\n            backgroundColor: \"#6c757d\"\n          },\n          children: \"Download PDF Report\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 147,\n    columnNumber: 5\n  }, this);\n}\n_s(AAHDCAdminPage, \"DwlrZVCbFBp1CrspQMUdIlhiFms=\");\n_c = AAHDCAdminPage;\nexport default AAHDCAdminPage;\nvar _c;\n$RefreshReg$(_c, \"AAHDCAdminPage\");","map":{"version":3,"names":["React","useState","useEffect","getUnits","runAllocation","downloadExcelReport","downloadPdfReport","jsxDEV","_jsxDEV","Fragment","_Fragment","AAHDCAdminPage","_s","allocatedUnits","setAllocatedUnits","unallocatedUnits","setUnallocatedUnits","selectedMethod","setSelectedMethod","message","setMessage","error","setError","loading","setLoading","unallocatedPage","setUnallocatedPage","allocatedPage","setAllocatedPage","PAGE_SIZE","fetchUnits","allUnits","validUnits","Array","isArray","filter","u","unitId","allocated","err","handleRunAllocation","response","complianceIssues","length","join","errorData","JSON","parse","issues","handleDownloadExcel","handleDownloadPdf","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","marginBottom","width","borderCollapse","marginTop","slice","map","unit","typology","grossArea","Number","toFixed","floorNumber","blockName","display","justifyContent","gap","onClick","p","Math","max","disabled","ceil","borderTop","paddingTop","textAlign","value","onChange","e","target","padding","borderRadius","border","fontWeight","color","owner","backgroundColor","_c","$RefreshReg$"],"sources":["/home/minale/trial/aahdc-lottery-platform-v1/frontend/src/pages/AAHDCAdminPage.js"],"sourcesContent":["// frontend/src/pages/AAHDCAdminPage.js\nimport React, { useState, useEffect } from \"react\";\nimport { getUnits } from \"../services/unitService\";\nimport { runAllocation } from \"../services/allocationService\";\nimport {\n  downloadExcelReport,\n  downloadPdfReport,\n} from \"../services/reportService\";\n\nfunction AAHDCAdminPage() {\n  // const [units, setUnits] = useState([]);\n  const [allocatedUnits, setAllocatedUnits] = useState([]);\n  const [unallocatedUnits, setUnallocatedUnits] = useState([]);\n  const [selectedMethod, setSelectedMethod] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  // Pagination state\n  const [unallocatedPage, setUnallocatedPage] = useState(1);\n  const [allocatedPage, setAllocatedPage] = useState(1);\n  const PAGE_SIZE = 10;\n\n  // const fetchUnits = async () => {\n  //   setLoading(true);\n  //   try {\n  //     const allUnits = await getUnits();\n  //     setUnits(allUnits);\n  //     setAllocatedUnits(allUnits.filter((u) => u.allocated));\n  //     setUnallocatedUnits(allUnits.filter((u) => !u.allocated));\n  //   } catch (err) {\n  //     setError(err.message || \"Failed to fetch units.\");\n  //   } finally {\n  //     setLoading(false);\n  //   }\n  // };\n\n  const fetchUnits = async () => {\n    setLoading(true);\n    try {\n      const allUnits = await getUnits();\n      // Defensive: filter out units missing required fields\n      const validUnits = Array.isArray(allUnits)\n        ? allUnits.filter(\n            (u) =>\n              u &&\n              typeof u.unitId !== \"undefined\" &&\n              typeof u.allocated !== \"undefined\"\n          )\n        : [];\n  setAllocatedUnits(validUnits.filter((u) => u.allocated === true));\n  setUnallocatedUnits(validUnits.filter((u) => u.allocated === false));\n  setUnallocatedPage(1); // Reset to first page on data reload\n  setAllocatedPage(1);\n    } catch (err) {\n      setError(err.message || \"Failed to fetch units.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchUnits();\n  }, []);\n\n  // const handleRunAllocation = async () => {\n  //   setMessage(\"\");\n  //   setError(\"\");\n  //   setLoading(true);\n  //   try {\n  //     const response = await runAllocation(selectedMethod);\n  //     setMessage(response.message);\n  //     if (response.complianceIssues && response.complianceIssues.length > 0) {\n  //       setError(\n  //         \"Compliance issues detected after allocation: \" +\n  //           response.complianceIssues.join(\", \")\n  //       );\n  //     }\n  //     fetchUnits(); // Refresh unit data\n  //   } catch (err) {\n  //     setError(err.message || \"Failed to run allocation.\");\n  //   } finally {\n  //     setLoading(false);\n  //   }\n  // };\n  const handleRunAllocation = async () => {\n    setMessage(\"\");\n    setError(\"\");\n    setLoading(true);\n    try {\n      const response = await runAllocation(selectedMethod);\n      setMessage(response.message);\n      if (response.complianceIssues && response.complianceIssues.length > 0) {\n        setError(\n          \"Compliance issues detected after allocation: \" +\n            response.complianceIssues.join(\", \")\n        );\n      }\n    } catch (err) {\n      try {\n        // Try parsing the error message as JSON for detailed issues\n        const errorData = JSON.parse(err.message);\n        if (errorData.issues) {\n          setError(\n            \"Pre-allocation compliance failed: \" + errorData.issues.join(\", \")\n          );\n        } else {\n          setError(err.message || \"Failed to run allocation.\");\n        }\n      } catch {\n        setError(err.message || \"Failed to run allocation.\");\n      }\n    } finally {\n      setLoading(false);\n      fetchUnits();\n    }\n  };\n\n  const handleDownloadExcel = async () => {\n    setError(\"\");\n    setMessage(\"\");\n    setLoading(true);\n    try {\n      await downloadExcelReport();\n      setMessage(\"Excel report downloaded successfully.\");\n    } catch (err) {\n      setError(err.message || \"Failed to download Excel report.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDownloadPdf = async () => {\n    setError(\"\");\n    setMessage(\"\");\n    setLoading(true);\n    try {\n      await downloadPdfReport();\n      setMessage(\"PDF report downloaded successfully.\");\n    } catch (err) {\n      setError(err.message || \"Failed to download PDF report.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"container-card\">\n      <h2>AAHDC Admin Portal</h2>\n      {loading && <p>Loading...</p>}\n      {message && <p className=\"message-success\">{message}</p>}\n      {error && <p className=\"message-error\">{error}</p>}\n\n      <section style={{ marginBottom: \"30px\" }}>\n        <h3>Unallocated Units ({unallocatedUnits.length})</h3>\n        {unallocatedUnits.length > 0 ? (\n          <>\n            <table\n              style={{\n                width: \"100%\",\n                borderCollapse: \"collapse\",\n                marginTop: \"10px\",\n              }}\n            >\n              <thead>\n                <tr>\n                  <th>Unit ID</th>\n                  <th>Typology</th>\n                  <th>Gross Area</th>\n                  <th>Floor</th>\n                  <th>Block</th>\n                </tr>\n              </thead>\n              <tbody>\n                {unallocatedUnits\n                  .slice((unallocatedPage - 1) * PAGE_SIZE, unallocatedPage * PAGE_SIZE)\n                  .map((unit) => (\n                    <tr key={unit.unitId}>\n                      <td>{unit.unitId}</td>\n                      <td>{unit.typology || \"-\"}</td>\n                      <td>\n                        {unit.grossArea ? Number(unit.grossArea).toFixed(2) : \"-\"}\n                      </td>\n                      <td>{unit.floorNumber || \"-\"}</td>\n                      <td>{unit.blockName || \"-\"}</td>\n                    </tr>\n                  ))}\n              </tbody>\n            </table>\n            {/* Pagination controls */}\n            <div style={{ display: \"flex\", justifyContent: \"center\", marginTop: 10, gap: 10 }}>\n              <button\n                onClick={() => setUnallocatedPage((p) => Math.max(1, p - 1))}\n                disabled={unallocatedPage === 1}\n              >\n                Previous\n              </button>\n              <span>\n                Page {unallocatedPage} of {Math.ceil(unallocatedUnits.length / PAGE_SIZE)}\n              </span>\n              <button\n                onClick={() => setUnallocatedPage((p) =>\n                  p < Math.ceil(unallocatedUnits.length / PAGE_SIZE) ? p + 1 : p\n                )}\n                disabled={unallocatedPage >= Math.ceil(unallocatedUnits.length / PAGE_SIZE)}\n              >\n                Next\n              </button>\n            </div>\n          </>\n        ) : (\n          <p>\n            No unallocated units to display. Please submit units via the\n            Developer Portal.\n          </p>\n        )}\n      </section>\n\n      <section\n        style={{\n          marginBottom: \"30px\",\n          borderTop: \"1px solid #eee\",\n          paddingTop: \"20px\",\n        }}\n      >\n        <h3>Run Allocation</h3>\n        <label\n          style={{ display: \"block\", marginBottom: \"15px\", textAlign: \"left\" }}\n        >\n          Select Distribution Method:\n          <select\n            value={selectedMethod}\n            onChange={(e) => setSelectedMethod(e.target.value)}\n            style={{\n              width: \"100%\",\n              padding: \"10px\",\n              borderRadius: \"8px\",\n              border: \"1px solid #ddd\",\n              marginTop: \"5px\",\n            }}\n          >\n            <option value=\"\">-- Select Method --</option>\n            <option value=\"Full Lottery\">Full Lottery (Houses + Shops)</option>\n            <option value=\"Hybrid Lottery\">\n              Hybrid Lottery (Houses) + Negotiation (Shops)\n            </option>\n            <option value=\"Block-by-Block Assignment\">\n              Block-by-Block Assignment\n            </option>\n            <option value=\"Lottery Based on Floor Number\">\n              Lottery Based on Floor Number\n            </option>\n          </select>\n        </label>\n        <button\n          onClick={handleRunAllocation}\n          disabled={!selectedMethod || loading || unallocatedUnits.length === 0}\n        >\n          Run Allocation\n        </button>\n      </section>\n\n      <section\n        style={{\n          marginBottom: \"30px\",\n          borderTop: \"1px solid #eee\",\n          paddingTop: \"20px\",\n        }}\n      >\n        <h3>Allocated Units ({allocatedUnits.length})</h3>\n        {allocatedUnits.length > 0 ? (\n          <>\n            <table\n              style={{\n                width: \"100%\",\n                borderCollapse: \"collapse\",\n                marginTop: \"10px\",\n              }}\n            >\n              <thead>\n                <tr>\n                  <th>Unit ID</th>\n                  <th>Typology</th>\n                  <th>Gross Area</th>\n                  <th>Floor</th>\n                  <th>Block</th>\n                  <th>Owner</th>\n                </tr>\n              </thead>\n              <tbody>\n                {allocatedUnits\n                  .slice((allocatedPage - 1) * PAGE_SIZE, allocatedPage * PAGE_SIZE)\n                  .map((unit) => (\n                    <tr key={unit.unitId}>\n                      <td>{unit.unitId}</td>\n                      <td>{unit.typology || \"-\"}</td>\n                      <td>\n                        {unit.grossArea ? Number(unit.grossArea).toFixed(2) : \"-\"}\n                      </td>\n                      <td>{unit.floorNumber || \"-\"}</td>\n                      <td>{unit.blockName || \"-\"}</td>\n                      <td\n                        style={{\n                          fontWeight: \"bold\",\n                          color: unit.owner === \"AAHDC\" ? \"#27ae60\" : \"#2980b9\",\n                        }}\n                      >\n                        {unit.owner || \"-\"}\n                      </td>\n                    </tr>\n                  ))}\n              </tbody>\n            </table>\n            {/* Pagination controls */}\n            <div style={{ display: \"flex\", justifyContent: \"center\", marginTop: 10, gap: 10 }}>\n              <button\n                onClick={() => setAllocatedPage((p) => Math.max(1, p - 1))}\n                disabled={allocatedPage === 1}\n              >\n                Previous\n              </button>\n              <span>\n                Page {allocatedPage} of {Math.ceil(allocatedUnits.length / PAGE_SIZE)}\n              </span>\n              <button\n                onClick={() => setAllocatedPage((p) =>\n                  p < Math.ceil(allocatedUnits.length / PAGE_SIZE) ? p + 1 : p\n                )}\n                disabled={allocatedPage >= Math.ceil(allocatedUnits.length / PAGE_SIZE)}\n              >\n                Next\n              </button>\n            </div>\n          </>\n        ) : (\n          <p>\n            No units have been allocated yet. Run an allocation method above.\n          </p>\n        )}\n      </section>\n\n      <section style={{ borderTop: \"1px solid #eee\", paddingTop: \"20px\" }}>\n        <h3>Reports</h3>\n        <div style={{ display: \"flex\", justifyContent: \"center\", gap: \"15px\" }}>\n          <button\n            onClick={handleDownloadExcel}\n            disabled={loading || allocatedUnits.length === 0}\n            style={{ backgroundColor: \"#28a745\" }}\n          >\n            Download Excel Report\n          </button>\n          <button\n            onClick={handleDownloadPdf}\n            disabled={loading || allocatedUnits.length === 0}\n            style={{ backgroundColor: \"#6c757d\" }}\n          >\n            Download PDF Report\n          </button>\n        </div>\n      </section>\n    </div>\n  );\n}\n\nexport default AAHDCAdminPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}