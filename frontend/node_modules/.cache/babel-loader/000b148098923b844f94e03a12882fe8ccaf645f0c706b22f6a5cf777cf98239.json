{"ast":null,"code":"var _jsxFileName = \"/home/minale/trial/aahdc-lottery-platform-v1/frontend/src/pages/AAHDCAdminPage.js\",\n  _s = $RefreshSig$();\n// frontend/src/pages/AAHDCAdminPage.js\nimport React, { useState, useEffect } from \"react\";\nimport { getUnits } from \"../services/unitService\";\nimport { runAllocation, getAllocatedUnits } from \"../services/allocationService\";\nimport { downloadExcelReport, downloadPdfReport } from \"../services/reportService\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction AAHDCAdminPage() {\n  _s();\n  // const [units, setUnits] = useState([]);\n  const [allocatedUnits, setAllocatedUnits] = useState([]);\n  const [unallocatedUnits, setUnallocatedUnits] = useState([]);\n  const [selectedMethod, setSelectedMethod] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  // Pagination state\n  const [unallocatedPage, setUnallocatedPage] = useState(1);\n  const [allocatedPage, setAllocatedPage] = useState(1);\n  const PAGE_SIZE = 10;\n\n  // const fetchUnits = async () => {\n  //   setLoading(true);\n  //   try {\n  //     const allUnits = await getUnits();\n  //     setUnits(allUnits);\n  //     setAllocatedUnits(allUnits.filter((u) => u.allocated));\n  //     setUnallocatedUnits(allUnits.filter((u) => !u.allocated));\n  //   } catch (err) {\n  //     setError(err.message || \"Failed to fetch units.\");\n  //   } finally {\n  //     setLoading(false);\n  //   }\n  // };\n\n  const fetchUnits = async () => {\n    setLoading(true);\n    try {\n      const allUnits = await getUnits();\n      // Defensive: filter out units missing required fields\n      const validUnits = Array.isArray(allUnits) ? allUnits.filter(u => u && typeof u.unitId !== \"undefined\" && typeof u.allocated !== \"undefined\") : [];\n      setAllocatedUnits(validUnits.filter(u => u.allocated === true));\n      setUnallocatedUnits(validUnits.filter(u => u.allocated === false));\n      setUnallocatedPage(1); // Reset to first page on data reload\n      setAllocatedPage(1);\n    } catch (err) {\n      setError(err.message || \"Failed to fetch units.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchUnits();\n  }, []);\n\n  // const handleRunAllocation = async () => {\n  //   setMessage(\"\");\n  //   setError(\"\");\n  //   setLoading(true);\n  //   try {\n  //     const response = await runAllocation(selectedMethod);\n  //     setMessage(response.message);\n  //     if (response.complianceIssues && response.complianceIssues.length > 0) {\n  //       setError(\n  //         \"Compliance issues detected after allocation: \" +\n  //           response.complianceIssues.join(\", \")\n  //       );\n  //     }\n  //     fetchUnits(); // Refresh unit data\n  //   } catch (err) {\n  //     setError(err.message || \"Failed to run allocation.\");\n  //   } finally {\n  //     setLoading(false);\n  //   }\n  // };\n  const handleRunAllocation = async () => {\n    setMessage(\"\");\n    setError(\"\");\n    setLoading(true);\n    try {\n      const response = await runAllocation(selectedMethod);\n      setMessage(response.message);\n      if (response.complianceIssues && response.complianceIssues.length > 0) {\n        setError(\"Compliance issues detected after allocation: \" + response.complianceIssues.join(\", \"));\n      }\n    } catch (err) {\n      try {\n        // Try parsing the error message as JSON for detailed issues\n        const errorData = JSON.parse(err.message);\n        if (errorData.issues) {\n          setError(\"Pre-allocation compliance failed: \" + errorData.issues.join(\", \"));\n        } else {\n          setError(err.message || \"Failed to run allocation.\");\n        }\n      } catch {\n        setError(err.message || \"Failed to run allocation.\");\n      }\n    } finally {\n      setLoading(false);\n      fetchUnits();\n      // Refresh allocated snapshot (includes candidate info if present)\n      try {\n        const alloc = await getAllocatedUnits();\n        // Merge candidate info where possible by unitId\n        // Note: AllocatedUnit rows include candidateName & candidatePhone\n        if (Array.isArray(alloc)) {\n          // decorate allocated units list to show candidate phone when owner is a person\n          // You may also display this in a separate section\n          // For now we store it in state via owner string only; table can be changed below\n        }\n      } catch (_) {}\n    }\n  };\n  const handleDownloadExcel = async () => {\n    setError(\"\");\n    setMessage(\"\");\n    setLoading(true);\n    try {\n      await downloadExcelReport();\n      setMessage(\"Excel report downloaded successfully.\");\n    } catch (err) {\n      setError(err.message || \"Failed to download Excel report.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleDownloadPdf = async () => {\n    setError(\"\");\n    setMessage(\"\");\n    setLoading(true);\n    try {\n      await downloadPdfReport();\n      setMessage(\"PDF report downloaded successfully.\");\n    } catch (err) {\n      setError(err.message || \"Failed to download PDF report.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-card\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"AAHDC Admin Portal\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 19\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"message-success\",\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"message-error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        marginBottom: \"30px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Unallocated Units (\", unallocatedUnits.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this), unallocatedUnits.length > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"table\", {\n          style: {\n            width: \"100%\",\n            borderCollapse: \"collapse\",\n            marginTop: \"10px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Unit ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Typology\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Gross Area\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Floor\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Block\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: unallocatedUnits.slice((unallocatedPage - 1) * PAGE_SIZE, unallocatedPage * PAGE_SIZE).map(unit => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: unit.unitId\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: unit.typology || \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: unit.grossArea ? Number(unit.grossArea).toFixed(2) : \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: unit.floorNumber || \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: unit.blockName || \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 23\n              }, this)]\n            }, unit.unitId, true, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            justifyContent: \"center\",\n            marginTop: 10,\n            gap: 10\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setUnallocatedPage(p => Math.max(1, p - 1)),\n            disabled: unallocatedPage === 1,\n            children: \"Previous\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Page \", unallocatedPage, \" of\", \" \", Math.ceil(unallocatedUnits.length / PAGE_SIZE)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setUnallocatedPage(p => p < Math.ceil(unallocatedUnits.length / PAGE_SIZE) ? p + 1 : p),\n            disabled: unallocatedPage >= Math.ceil(unallocatedUnits.length / PAGE_SIZE),\n            children: \"Next\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No unallocated units to display. Please submit units via the Developer Portal.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        marginBottom: \"30px\",\n        borderTop: \"1px solid #eee\",\n        paddingTop: \"20px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Run Allocation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          display: \"block\",\n          marginBottom: \"15px\",\n          textAlign: \"left\"\n        },\n        children: [\"Select Distribution Method:\", /*#__PURE__*/_jsxDEV(\"select\", {\n          value: selectedMethod,\n          onChange: e => setSelectedMethod(e.target.value),\n          style: {\n            width: \"100%\",\n            padding: \"10px\",\n            borderRadius: \"8px\",\n            border: \"1px solid #ddd\",\n            marginTop: \"5px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"-- Select Method --\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Full Lottery\",\n            children: \"Full Lottery (Houses + Shops)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Hybrid Lottery\",\n            children: \"Hybrid Lottery (Houses) + Negotiation (Shops)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Block-by-Block Assignment\",\n            children: \"Block-by-Block Assignment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Lottery Based on Floor Number\",\n            children: \"Lottery Based on Floor Number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Assign Candidates by Typology\",\n            children: \"Assign Candidates by Typology (match candidates to units)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleRunAllocation,\n        disabled: !selectedMethod || loading || unallocatedUnits.length === 0,\n        children: \"Run Allocation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        marginBottom: \"30px\",\n        borderTop: \"1px solid #eee\",\n        paddingTop: \"20px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Allocated Units (\", allocatedUnits.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 3\n      }, this), allocatedUnits.length > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"table\", {\n          style: {\n            width: \"100%\",\n            borderCollapse: \"collapse\",\n            marginTop: \"10px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Unit ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 315,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Typology\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Gross Area\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Floor\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Block\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Owner / Candidate\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Phone\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: allocatedUnits.slice((allocatedPage - 1) * PAGE_SIZE, allocatedPage * PAGE_SIZE).map(unit => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: unit.unitId\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: unit.typology || \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: unit.grossArea ? Number(unit.grossArea).toFixed(2) : \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 334,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: unit.floorNumber || \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: unit.blockName || \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 340,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                style: {\n                  fontWeight: \"bold\",\n                  color: unit.owner === \"AAHDC\" ? \"#27ae60\" : \"#2980b9\"\n                },\n                children: unit.owner || \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 341,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                style: {\n                  color: \"#333\"\n                },\n                children: unit.owner && unit.owner !== \"AAHDC\" && unit.phone ? unit.phone : \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 349,\n                columnNumber: 23\n              }, this)]\n            }, unit.unitId, true, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            justifyContent: \"center\",\n            marginTop: 10,\n            gap: 10\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setAllocatedPage(p => Math.max(1, p - 1)),\n            disabled: allocatedPage === 1,\n            children: \"Previous\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Page \", allocatedPage, \" of\", \" \", Math.ceil(allocatedUnits.length / PAGE_SIZE)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setAllocatedPage(p => p < Math.ceil(allocatedUnits.length / PAGE_SIZE) ? p + 1 : p),\n            disabled: allocatedPage >= Math.ceil(allocatedUnits.length / PAGE_SIZE),\n            children: \"Next\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No units have been allocated yet. Run an allocation method above.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        borderTop: \"1px solid #eee\",\n        paddingTop: \"20px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Reports\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          justifyContent: \"center\",\n          gap: \"15px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleDownloadExcel,\n          disabled: loading || allocatedUnits.length === 0,\n          style: {\n            backgroundColor: \"#28a745\"\n          },\n          children: \"Download Excel Report\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleDownloadPdf,\n          disabled: loading || allocatedUnits.length === 0,\n          style: {\n            backgroundColor: \"#6c757d\"\n          },\n          children: \"Download PDF Report\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 158,\n    columnNumber: 5\n  }, this);\n}\n_s(AAHDCAdminPage, \"DwlrZVCbFBp1CrspQMUdIlhiFms=\");\n_c = AAHDCAdminPage;\nexport default AAHDCAdminPage;\nvar _c;\n$RefreshReg$(_c, \"AAHDCAdminPage\");","map":{"version":3,"names":["React","useState","useEffect","getUnits","runAllocation","getAllocatedUnits","downloadExcelReport","downloadPdfReport","jsxDEV","_jsxDEV","Fragment","_Fragment","AAHDCAdminPage","_s","allocatedUnits","setAllocatedUnits","unallocatedUnits","setUnallocatedUnits","selectedMethod","setSelectedMethod","message","setMessage","error","setError","loading","setLoading","unallocatedPage","setUnallocatedPage","allocatedPage","setAllocatedPage","PAGE_SIZE","fetchUnits","allUnits","validUnits","Array","isArray","filter","u","unitId","allocated","err","handleRunAllocation","response","complianceIssues","length","join","errorData","JSON","parse","issues","alloc","_","handleDownloadExcel","handleDownloadPdf","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","marginBottom","width","borderCollapse","marginTop","slice","map","unit","typology","grossArea","Number","toFixed","floorNumber","blockName","display","justifyContent","gap","onClick","p","Math","max","disabled","ceil","borderTop","paddingTop","textAlign","value","onChange","e","target","padding","borderRadius","border","fontWeight","color","owner","phone","backgroundColor","_c","$RefreshReg$"],"sources":["/home/minale/trial/aahdc-lottery-platform-v1/frontend/src/pages/AAHDCAdminPage.js"],"sourcesContent":["// frontend/src/pages/AAHDCAdminPage.js\nimport React, { useState, useEffect } from \"react\";\nimport { getUnits } from \"../services/unitService\";\nimport { runAllocation, getAllocatedUnits } from \"../services/allocationService\";\nimport {\n  downloadExcelReport,\n  downloadPdfReport,\n} from \"../services/reportService\";\n\nfunction AAHDCAdminPage() {\n  // const [units, setUnits] = useState([]);\n  const [allocatedUnits, setAllocatedUnits] = useState([]);\n  const [unallocatedUnits, setUnallocatedUnits] = useState([]);\n  const [selectedMethod, setSelectedMethod] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  // Pagination state\n  const [unallocatedPage, setUnallocatedPage] = useState(1);\n  const [allocatedPage, setAllocatedPage] = useState(1);\n  const PAGE_SIZE = 10;\n\n  // const fetchUnits = async () => {\n  //   setLoading(true);\n  //   try {\n  //     const allUnits = await getUnits();\n  //     setUnits(allUnits);\n  //     setAllocatedUnits(allUnits.filter((u) => u.allocated));\n  //     setUnallocatedUnits(allUnits.filter((u) => !u.allocated));\n  //   } catch (err) {\n  //     setError(err.message || \"Failed to fetch units.\");\n  //   } finally {\n  //     setLoading(false);\n  //   }\n  // };\n\n  const fetchUnits = async () => {\n    setLoading(true);\n    try {\n      const allUnits = await getUnits();\n      // Defensive: filter out units missing required fields\n      const validUnits = Array.isArray(allUnits)\n        ? allUnits.filter(\n            (u) =>\n              u &&\n              typeof u.unitId !== \"undefined\" &&\n              typeof u.allocated !== \"undefined\"\n          )\n        : [];\n      setAllocatedUnits(validUnits.filter((u) => u.allocated === true));\n      setUnallocatedUnits(validUnits.filter((u) => u.allocated === false));\n      setUnallocatedPage(1); // Reset to first page on data reload\n      setAllocatedPage(1);\n    } catch (err) {\n      setError(err.message || \"Failed to fetch units.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchUnits();\n  }, []);\n\n  // const handleRunAllocation = async () => {\n  //   setMessage(\"\");\n  //   setError(\"\");\n  //   setLoading(true);\n  //   try {\n  //     const response = await runAllocation(selectedMethod);\n  //     setMessage(response.message);\n  //     if (response.complianceIssues && response.complianceIssues.length > 0) {\n  //       setError(\n  //         \"Compliance issues detected after allocation: \" +\n  //           response.complianceIssues.join(\", \")\n  //       );\n  //     }\n  //     fetchUnits(); // Refresh unit data\n  //   } catch (err) {\n  //     setError(err.message || \"Failed to run allocation.\");\n  //   } finally {\n  //     setLoading(false);\n  //   }\n  // };\n  const handleRunAllocation = async () => {\n    setMessage(\"\");\n    setError(\"\");\n    setLoading(true);\n    try {\n      const response = await runAllocation(selectedMethod);\n      setMessage(response.message);\n      if (response.complianceIssues && response.complianceIssues.length > 0) {\n        setError(\n          \"Compliance issues detected after allocation: \" +\n            response.complianceIssues.join(\", \")\n        );\n      }\n    } catch (err) {\n      try {\n        // Try parsing the error message as JSON for detailed issues\n        const errorData = JSON.parse(err.message);\n        if (errorData.issues) {\n          setError(\n            \"Pre-allocation compliance failed: \" + errorData.issues.join(\", \")\n          );\n        } else {\n          setError(err.message || \"Failed to run allocation.\");\n        }\n      } catch {\n        setError(err.message || \"Failed to run allocation.\");\n      }\n    } finally {\n      setLoading(false);\n      fetchUnits();\n      // Refresh allocated snapshot (includes candidate info if present)\n      try {\n        const alloc = await getAllocatedUnits();\n        // Merge candidate info where possible by unitId\n        // Note: AllocatedUnit rows include candidateName & candidatePhone\n        if (Array.isArray(alloc)) {\n          // decorate allocated units list to show candidate phone when owner is a person\n          // You may also display this in a separate section\n          // For now we store it in state via owner string only; table can be changed below\n        }\n      } catch (_) {}\n    }\n  };\n\n  const handleDownloadExcel = async () => {\n    setError(\"\");\n    setMessage(\"\");\n    setLoading(true);\n    try {\n      await downloadExcelReport();\n      setMessage(\"Excel report downloaded successfully.\");\n    } catch (err) {\n      setError(err.message || \"Failed to download Excel report.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDownloadPdf = async () => {\n    setError(\"\");\n    setMessage(\"\");\n    setLoading(true);\n    try {\n      await downloadPdfReport();\n      setMessage(\"PDF report downloaded successfully.\");\n    } catch (err) {\n      setError(err.message || \"Failed to download PDF report.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"container-card\">\n      <h2>AAHDC Admin Portal</h2>\n      {loading && <p>Loading...</p>}\n      {message && <p className=\"message-success\">{message}</p>}\n      {error && <p className=\"message-error\">{error}</p>}\n\n      <section style={{ marginBottom: \"30px\" }}>\n        <h3>Unallocated Units ({unallocatedUnits.length})</h3>\n        {unallocatedUnits.length > 0 ? (\n          <>\n            <table\n              style={{\n                width: \"100%\",\n                borderCollapse: \"collapse\",\n                marginTop: \"10px\",\n              }}\n            >\n              <thead>\n                <tr>\n                  <th>Unit ID</th>\n                  <th>Typology</th>\n                  <th>Gross Area</th>\n                  <th>Floor</th>\n                  <th>Block</th>\n                </tr>\n              </thead>\n              <tbody>\n                {unallocatedUnits\n                  .slice(\n                    (unallocatedPage - 1) * PAGE_SIZE,\n                    unallocatedPage * PAGE_SIZE\n                  )\n                  .map((unit) => (\n                    <tr key={unit.unitId}>\n                      <td>{unit.unitId}</td>\n                      <td>{unit.typology || \"-\"}</td>\n                      <td>\n                        {unit.grossArea\n                          ? Number(unit.grossArea).toFixed(2)\n                          : \"-\"}\n                      </td>\n                      <td>{unit.floorNumber || \"-\"}</td>\n                      <td>{unit.blockName || \"-\"}</td>\n                    </tr>\n                  ))}\n              </tbody>\n            </table>\n            {/* Pagination controls */}\n            <div\n              style={{\n                display: \"flex\",\n                justifyContent: \"center\",\n                marginTop: 10,\n                gap: 10,\n              }}\n            >\n              <button\n                onClick={() => setUnallocatedPage((p) => Math.max(1, p - 1))}\n                disabled={unallocatedPage === 1}\n              >\n                Previous\n              </button>\n              <span>\n                Page {unallocatedPage} of{\" \"}\n                {Math.ceil(unallocatedUnits.length / PAGE_SIZE)}\n              </span>\n              <button\n                onClick={() =>\n                  setUnallocatedPage((p) =>\n                    p < Math.ceil(unallocatedUnits.length / PAGE_SIZE)\n                      ? p + 1\n                      : p\n                  )\n                }\n                disabled={\n                  unallocatedPage >=\n                  Math.ceil(unallocatedUnits.length / PAGE_SIZE)\n                }\n              >\n                Next\n              </button>\n            </div>\n          </>\n        ) : (\n          <p>\n            No unallocated units to display. Please submit units via the\n            Developer Portal.\n          </p>\n        )}\n      </section>\n\n      <section\n        style={{\n          marginBottom: \"30px\",\n          borderTop: \"1px solid #eee\",\n          paddingTop: \"20px\",\n        }}\n      >\n        <h3>Run Allocation</h3>\n        <label\n          style={{ display: \"block\", marginBottom: \"15px\", textAlign: \"left\" }}\n        >\n          Select Distribution Method:\n          <select\n            value={selectedMethod}\n            onChange={(e) => setSelectedMethod(e.target.value)}\n            style={{\n              width: \"100%\",\n              padding: \"10px\",\n              borderRadius: \"8px\",\n              border: \"1px solid #ddd\",\n              marginTop: \"5px\",\n            }}\n          >\n            <option value=\"\">-- Select Method --</option>\n            <option value=\"Full Lottery\">Full Lottery (Houses + Shops)</option>\n            <option value=\"Hybrid Lottery\">\n              Hybrid Lottery (Houses) + Negotiation (Shops)\n            </option>\n            <option value=\"Block-by-Block Assignment\">\n              Block-by-Block Assignment\n            </option>\n            <option value=\"Lottery Based on Floor Number\">\n              Lottery Based on Floor Number\n            </option>\n            <option value=\"Assign Candidates by Typology\">\n              Assign Candidates by Typology (match candidates to units)\n            </option>\n          </select>\n        </label>\n        <button\n          onClick={handleRunAllocation}\n          disabled={!selectedMethod || loading || unallocatedUnits.length === 0}\n        >\n          Run Allocation\n        </button>\n      </section>\n\n      <section\n        style={{\n          marginBottom: \"30px\",\n          borderTop: \"1px solid #eee\",\n          paddingTop: \"20px\",\n        }}\n      >\n  <h3>Allocated Units ({allocatedUnits.length})</h3>\n        {allocatedUnits.length > 0 ? (\n          <>\n            <table\n              style={{\n                width: \"100%\",\n                borderCollapse: \"collapse\",\n                marginTop: \"10px\",\n              }}\n            >\n              <thead>\n                <tr>\n                  <th>Unit ID</th>\n                  <th>Typology</th>\n                  <th>Gross Area</th>\n                  <th>Floor</th>\n                  <th>Block</th>\n                  <th>Owner / Candidate</th>\n                  <th>Phone</th>\n                </tr>\n              </thead>\n              <tbody>\n                {allocatedUnits\n                  .slice(\n                    (allocatedPage - 1) * PAGE_SIZE,\n                    allocatedPage * PAGE_SIZE\n                  )\n                  .map((unit) => (\n                    <tr key={unit.unitId}>\n                      <td>{unit.unitId}</td>\n                      <td>{unit.typology || \"-\"}</td>\n                      <td>\n                        {unit.grossArea\n                          ? Number(unit.grossArea).toFixed(2)\n                          : \"-\"}\n                      </td>\n                      <td>{unit.floorNumber || \"-\"}</td>\n                      <td>{unit.blockName || \"-\"}</td>\n                      <td\n                        style={{\n                          fontWeight: \"bold\",\n                          color: unit.owner === \"AAHDC\" ? \"#27ae60\" : \"#2980b9\",\n                        }}\n                      >\n                        {unit.owner || \"-\"}\n                      </td>\n                      <td style={{ color: \"#333\" }}>\n                        {/* Optional: if backend merges candidate phone into units, otherwise show '-' */}\n                        {unit.owner && unit.owner !== \"AAHDC\" && unit.phone ? unit.phone : \"-\"}\n                      </td>\n                    </tr>\n                  ))}\n              </tbody>\n            </table>\n            {/* Pagination controls */}\n            <div\n              style={{\n                display: \"flex\",\n                justifyContent: \"center\",\n                marginTop: 10,\n                gap: 10,\n              }}\n            >\n              <button\n                onClick={() => setAllocatedPage((p) => Math.max(1, p - 1))}\n                disabled={allocatedPage === 1}\n              >\n                Previous\n              </button>\n              <span>\n                Page {allocatedPage} of{\" \"}\n                {Math.ceil(allocatedUnits.length / PAGE_SIZE)}\n              </span>\n              <button\n                onClick={() =>\n                  setAllocatedPage((p) =>\n                    p < Math.ceil(allocatedUnits.length / PAGE_SIZE) ? p + 1 : p\n                  )\n                }\n                disabled={\n                  allocatedPage >= Math.ceil(allocatedUnits.length / PAGE_SIZE)\n                }\n              >\n                Next\n              </button>\n            </div>\n          </>\n        ) : (\n          <p>\n            No units have been allocated yet. Run an allocation method above.\n          </p>\n        )}\n      </section>\n\n      <section style={{ borderTop: \"1px solid #eee\", paddingTop: \"20px\" }}>\n        <h3>Reports</h3>\n        <div style={{ display: \"flex\", justifyContent: \"center\", gap: \"15px\" }}>\n          <button\n            onClick={handleDownloadExcel}\n            disabled={loading || allocatedUnits.length === 0}\n            style={{ backgroundColor: \"#28a745\" }}\n          >\n            Download Excel Report\n          </button>\n          <button\n            onClick={handleDownloadPdf}\n            disabled={loading || allocatedUnits.length === 0}\n            style={{ backgroundColor: \"#6c757d\" }}\n          >\n            Download PDF Report\n          </button>\n        </div>\n      </section>\n    </div>\n  );\n}\n\nexport default AAHDCAdminPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}